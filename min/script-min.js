function calculateMousePosition(e){var t=canvas.getBoundingClientRect(),n=document.documentElement;return{x:e.clientX-t.left-n.scrollLeft,y:e.clientY-t.top-n.scrollTop}}var pause_screen=document.getElementById("pause-screen"),start_screen=document.getElementById("start-screen"),start_label=document.getElementById("start-label"),adjacent=document.getElementById("adjacent"),opposite=document.getElementById("opposite"),play=document.getElementById("play"),counter=document.getElementById("counter"),leaderboard=document.getElementById("highscore"),speedCounter=document.getElementById("speed-counter"),up=document.getElementById("up"),down=document.getElementById("down"),count=0,highscore=0,red=document.getElementById("red"),green=document.getElementById("green"),blue=document.getElementById("blue"),orange=document.getElementById("orange"),bgColor="#51835C",canvas,canvasContext,ballRadius=20,velocityX=5,velocityY=5,PADDLE_HEIGHT=100,framesPerSecond=48,paddle1Y=200,paddle2Y=150,getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},ballXPosition=380,ballYPosition=getRandomIntInclusive(40,410),drawElement=function(e,t,n,a,o){canvasContext.fillStyle=o,canvasContext.fillRect(e,t,n,a)},drawCircle=function(e,t,n,a){canvasContext.fillStyle=a,canvasContext.beginPath(),canvasContext.arc(e,t,n,0,2*Math.PI,!0),canvasContext.fill()},drawEverything=function(){drawElement(0,0,canvas.width,canvas.height,bgColor),drawElement(canvas.width-20,paddle1Y,10,100,"white"),drawElement(10,paddle2Y,10,100,"white"),drawCircle(ballXPosition,ballYPosition,ballRadius,"white")},showPlayButton=function(){adjacent.style.transform="translateX(-50%) translateY(-27%) rotateZ(60deg)",adjacent.style.left="55%",opposite.style.transform="translateX(-50%) translateY(-72%) rotateZ(-60deg)",opposite.style.left="55%",start_label.innerText="play",pause_screen.style.display="block",pause_screen.style.cursor="default",canvas.style.cursor="default",setTimeout(function(){pause_screen.style.opacity=1},50)},showPauseButton=function(){adjacent.style.left="60%",opposite.style.left="60%",adjacent.style.transform="translateX(-50%) translateY(-50%)",opposite.style.transform="translateX(-50%) translateY(-50%)",start_label.innerText="pause",pause_screen.style.opacity=0,pause_screen.style.cursor="none",canvas.style.cursor="none",setTimeout(function(){pause_screen.style.display="none"},200)},hideStartScreen=function(){start_screen.style.cursor="none",start_screen.style.opacity="0",setTimeout(function(){start_screen.style.display="none"},200)},showStartScreen=function(){adjacent.style.transform="translateX(-50%) translateY(-27%) rotateZ(60deg)",adjacent.style.left="55%",opposite.style.transform="translateX(-50%) translateY(-72%) rotateZ(-60deg)",opposite.style.left="55%",start_label.innerText="play",start_screen.innerText="Press Play to Begin",start_screen.style.display="block",start_screen.style.cursor="default",canvas.style.cursor="default",setTimeout(function(){start_screen.style.opacity=1},150)},ballReset=function(){showStartScreen(),counter.style.color="#fff",counter.style.textShadow="none",velocityX*=-1,ballXPosition=canvas.width/2,ballYPosition=canvas.height/2},moveEverything=function(){ballXPosition>canvas.width-ballRadius-20&&(ballYPosition>paddle1Y&&ballYPosition<paddle1Y+PADDLE_HEIGHT?(velocityX*=-1,++count>=highscore&&(highscore=count)):(clearInterval(window.interval),window.interval=null,ballReset(),count>highscore&&(highscore=count),count=0),leaderboard.innerText=highscore,counter.innerText=count),ballXPosition<0+ballRadius+20&&(ballYPosition>paddle2Y&&ballYPosition<paddle2Y+PADDLE_HEIGHT?(velocityX*=-1,++count>=highscore&&(highscore=count)):(clearInterval(window.interval),window.interval=null,ballReset(),count>highscore&&(highscore=count),count=0),leaderboard.innerText=highscore,counter.innerText=count),ballXPosition+=velocityX,((ballYPosition+=velocityY)>=canvas.height-ballRadius||ballYPosition<=ballRadius)&&(velocityY*=-1)},startGame=function(){window.interval?(clearInterval(window.interval),window.interval=null,showPlayButton()):(window.interval=setInterval(function(){moveEverything(),drawEverything()},1e3/framesPerSecond),hideStartScreen(),showPauseButton())};window.onload=function(){canvas=document.getElementById("gameCanvas"),canvasContext=canvas.getContext("2d"),drawElement(0,0,canvas.width,canvas.height,bgColor),speedCounter.innerText=velocityX,canvas.addEventListener("mousemove",function(e){var t=calculateMousePosition(e);paddle2Y=paddle1Y=t.y-PADDLE_HEIGHT/2}),start_screen.addEventListener("click",startGame),pause_screen.addEventListener("click",startGame),play.addEventListener("click",startGame),document.body.addEventListener("keydown",function(e){32===e.keyCode&&(window.interval?(showPlayButton(),clearInterval(window.interval),window.interval=null):(hideStartScreen(),showPauseButton(),window.interval=setInterval(function(){moveEverything(),drawEverything()},1e3/framesPerSecond)))}),red.addEventListener("click",function(){bgColor="#AD716B",drawEverything()}),green.addEventListener("click",function(){bgColor="#51835C",drawEverything()}),blue.addEventListener("click",function(){bgColor="#43636B",drawEverything()}),orange.addEventListener("click",function(){bgColor="#AD906B",drawEverything()}),up.addEventListener("click",function(){this.blur(),velocityX<0?velocityX--:velocityX>=0&&velocityX++,velocityY<0?velocityY--:velocityY>=0&&velocityY++,speedCounter.innerText=Math.abs(velocityX)}),down.addEventListener("click",function(){this.blur(),velocityX<0?velocityX++:velocityX>0&&velocityX--,velocityY<0?velocityY++:velocityY>0&&velocityY--,speedCounter.innerText=Math.abs(velocityX)})};